<!DOCTYPE html>
<html lang="pt-BR">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Instafood</title>
        <!--Global Stylesheet-->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
            integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="src/assets/css/bootstrap.min.css">
        <!--Custom Stylesheets-->
        <link rel="stylesheet" href="src\assets\css\style.css">
        <link rel="stylesheet" href="src\assets\css\login.css">
        <!--Font Awesome-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
            integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
            crossorigin="anonymous" />
        <!--Material icons-->
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <!--Hind Font-->
        <link href="https://fonts.googleapis.com/css2?family=Hind:wght@300&display=swap" rel="stylesheet" />
    
    </head>

<body>
    <!--Page content-->
    <main>
        <h1><span class="styling"> Insta</span>food</h1>
        <h2>Confirmação de Conta</h2>
    </main>
    <!--Page content end-->
    <!--Javascript Sources-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        const params = new URLSearchParams(window.location.search);
        axios.get('http://localhost:8080/api/auth/confirmar', {
            params: {
                token: params.get('token')
            }
        })
            .then(res => {
                const primeiroNome = res.data.nome.split(' ')[0];
                alert('Olá, ' + primeiroNome + '! Sua conta foi confirmada com sucesso');
                window.location.href = 'http://127.0.0.1:5500/login.html'
            })
            .catch(err => alert(err.response.data.mensagem))
            .then(() => window.location.href = 'http://127.0.0.1:5500/login.html')
    </script>
</body>

</html>